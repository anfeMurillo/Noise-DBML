Table dishes {
  dish_id int [pk, increment, not null]
  restaurant_id int [not null]
  dish_name varchar [not null]
  price decimal [not null]
}

Table ingredients {
  ingredient_id varchar [pk, not null]
  ingredient_name varchar [not null]
}

Table inventories {
  inventory_id int [pk, increment, not null]
  restaurant_id int [not null]
  ingredient_id varchar [not null]
  stock decimal [not null]
  unit varchar [not null] // original type: USER-DEFINED
  price decimal [not null]
  expiration_date date
}

Table lost_inventories {
  lost_id int [pk, increment, not null]
  inventory_id int [not null]
  quantity decimal [not null]
  unit varchar [not null] // original type: USER-DEFINED
  unit_price decimal [not null]
  date_event timestamptz
}

Table needed_ingredients {
  dish_id int [pk, not null]
  ingredient_id varchar [pk, not null]
  needed_quantity decimal [not null]
  unit varchar [not null] // original type: USER-DEFINED
  is_optional boolean [default: false]
}

Table order_items {
  order_item_id int [pk, increment, not null]
  order_id int [not null]
  dish_id int [not null]
  quantity int [not null, default: 1]
  price_at_moment decimal [not null]
}

Table orders {
  order_id int [pk, increment, not null]
  user_id int [not null]
  restaurant_id int [not null]
  created_at timestamptz [not null]
  status varchar [not null, default: 'received'] // original type: USER-DEFINED
}

Table payments {
  payment_id int [pk, increment, not null]
  user_id int [not null]
  order_id int [not null]
  amount decimal [not null]
  currency char [default: 'USD']
  method varchar [not null] // original type: USER-DEFINED
  status varchar [not null] // original type: USER-DEFINED
  created_at timestamptz
}

Table restaurants {
  restaurant_id int [pk, increment, not null]
  restaurant_name varchar [not null]
  address varchar [not null]
  is_active boolean [not null, default: true]
  is_open boolean [not null, default: false]
}

Table users {
  user_id int [pk, increment, not null]
  user_name varchar [not null]
  email varchar [not null]
  first_name varchar [not null]
  last_name varchar [not null]
  country_code char [not null]
  user_role varchar [not null] // original type: USER-DEFINED
  created_at timestamptz
  is_active boolean [not null, default: true]
  password_hash varchar [not null]
}

Ref: dishes.restaurant_id > restaurants.restaurant_id
Ref: inventories.ingredient_id > ingredients.ingredient_id
Ref: inventories.restaurant_id > restaurants.restaurant_id
Ref: lost_inventories.inventory_id > inventories.inventory_id
Ref: needed_ingredients.dish_id > dishes.dish_id
Ref: needed_ingredients.ingredient_id > ingredients.ingredient_id
Ref: order_items.dish_id > dishes.dish_id
Ref: order_items.order_id > orders.order_id
Ref: orders.restaurant_id > restaurants.restaurant_id
Ref: orders.user_id > users.user_id
Ref: payments.order_id > orders.order_id
Ref: payments.user_id > users.user_id