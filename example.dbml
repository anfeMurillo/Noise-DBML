// Example DBML schema for testing

Table users {
  id integer [primary key]
  username varchar(50) [not null, unique]
  email varchar(100) [not null, unique]
  password_hash varchar(255) [not null]
  created_at timestamp [default: `now()`]
  updated_at timestamp
  
  Indexes {
    email
    username
  }
}

Table posts {
  id integer [primary key]
  user_id integer [not null, ref: > users.id]
  title varchar(255) [not null]
  content text
  published boolean [default: false]
  created_at timestamp [default: `now()`]
  updated_at timestamp
  
  Indexes {
    user_id
    (user_id, created_at)
  }
}

Table comments {
  id integer [primary key]
  post_id integer [not null, ref: > posts.id]
  user_id integer [not null, ref: > users.id]
  content text [not null]
  created_at timestamp [default: `now()`]
  
  Indexes {
    post_id
    user_id
  }
}

Table tags {
  id integer [primary key]
  name varchar(50) [not null, unique]
  created_at timestamp [default: `now()`]
}

Table post_tags {
  post_id integer [ref: > posts.id]
  tag_id integer [ref: > tags.id]
  
  Indexes {
    (post_id, tag_id) [pk]
  }
}

// Relationships
// The labels will show cardinality like 1:n, 1:1, n:n
// Examples: 1:1 (one to one), 1:n (one to many), n:n (many to many)

Ref: posts.user_id > users.id [delete: cascade]  // 1:n
Ref: comments.post_id > posts.id [delete: cascade]  // 1:n
Ref: comments.user_id > users.id [delete: set null]  // 1:n
Ref: post_tags.post_id <> posts.id [delete: cascade]  // n:n
Ref: post_tags.tag_id <> tags.id [delete: cascade]  // n:n
